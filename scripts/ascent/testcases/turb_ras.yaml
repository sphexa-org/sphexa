# Add a pipeline to compute radius. Origin: 0, 0, 0
-
  action: "add_pipelines"
  pipelines:
    pl1:
      f3:
        type: "threshold"
        params:
          field: Z
          min_value: "-1"
          max_value: "1"

-
  action: "add_queries"
  queries:
    q3:
      pipeline: "pl1"
      params:
        expression: "binning('VX', 'avg', [axis('X',num_bins=256,max_val=0.5), axis('Y',num_bins=256,max_val=0.5), axis('Z',num_bins=256,max_val=0.5)])"
        name: "vx_binned"
    # q5:
    #   pipeline: "pl2"
    #   params:
    #     expression: "binning('PressureNormalized', 'avg', [axis('Radius',num_bins=256,max_val=1.0)])"
    #     name: "RadialPressureNormalized"
# -
#   action: "save_session"
#   file_name: "turb_session"
- 
  action: "add_extracts"
  extracts: 
    e1: 
      type: "relay"
      pipeline: "pl1"
      params: 
        protocol: hdf5
        path: "res2.h5"
        fields:
          - vx_binned
- 
  action: "execute"